(()=>{"use strict";function t(){r(),document.documentElement.classList.remove("menu-open")}let n=!0,s=(e=500)=>{document.documentElement.classList.contains("lock")?r(e):i(e)},r=(e=500)=>{let t=document.querySelector("body");if(n){let s=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<s.length;e++){s[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),n=!1,setTimeout((function(){n=!0}),e)}},i=(e=500)=>{let t=document.querySelector("body");if(n){let s=document.querySelectorAll("[data-lp]");for(let e=0;e<s.length;e++){s[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),e)}};const o=async function(e){const t=await fetch(e);if(!t.ok)throw new Error(`Ошибка по адресу "${e}", статус ошибки ${t.status}!`);return await t.json()},a=(e,t)=>{o("./files/pets.json").then((n=>{for(const s of n)if(s.id==t)return e.innerHTML=`\n            <article class="card">\n              <a class="card__link" href="#">\n                <div class="card__image-ibg">\n                  <picture>\n                    <source \n                      data-srcset="img/pets/${s.img.replace(/\.[^.]+$/,"")}.webp" \n                      srcset="img/pets/${s.img.replace(/\.[^.]+$/,"")}.webp" type="image/webp"\n                    >\n                    <img src="img/pets/${s.img}" data-src="img/pets/${s.img}" alt="${s.name}">\n                  </picture>\n                </div>\n                <div class="card__content">\n                  <h3 class="card__title">${s.name}</h3>\n                  <div class="card__button button-secondary">Learn more</div>\n                </div>\n              </a>\n            </article>\n        `,e}))};(()=>{const e=document.querySelector(".pets-slider");if(!e)return;const t=e.querySelector(".pets-slider__wrapper"),n=t.querySelector(".pets-slider__swiper"),s=e.querySelector(".pets-slider__nav-button_prev"),r=e.querySelector(".pets-slider__nav-button_next");let i=[],c=[],d=[],l=[],u=window.innerWidth;window.addEventListener("resize",(()=>{(u>=768&&window.innerWidth<768||u<768&&window.innerWidth>=768||u>=1280&&window.innerWidth<1280||u<1280&&window.innerWidth>=1280)&&w(),u=window.innerWidth}));const m=()=>{const e=(()=>{const e=window.innerWidth;return e<768?1:e<1280?2:3})(),t=i.reduce(((e,t)=>[...e,t.id]),[]).sort((()=>Math.random()-.5));return[...new Set([...d,...t])].slice(-e)},p=(e="")=>{const i=+getComputedStyle(t).width.replace("px","")+ +getComputedStyle(n).columnGap.replace("px","");let o=1;switch(e){case"prev":o=0;break;case"next":o=2}""!==e&&(s.disabled=!0,r.disabled=!0,n.style.transition="transform 0.5s ease",((e,t)=>{const i=n.querySelectorAll(".pets-slider__slide");new Promise((o=>{setTimeout((()=>{switch(n.style.transition="transform 0s ease",n.style.transform=`translateX(${e}px)`,t){case"prev":l=d,d=c,c=m(),c.forEach(((e,t)=>{n.insertAdjacentElement("afterbegin",_(e)),i[i.length-1-t].remove()}));break;case"next":c=d,d=l,l=m(),l.forEach(((e,t)=>{n.insertAdjacentElement("beforeend",_(e)),i[t].remove()}))}s.disabled=!1,r.disabled=!1,o()}),500)}))})(-i,e)),n.style.transform=`translateX(${-i*o}px)`},_=e=>{const t=document.createElement("li");return t.classList.add("pets-slider__slide"),t.dataset.id=e,t.append(a(t,e)),t},w=()=>{o("./files/pets.json").then((e=>{i=[...e],(()=>{let e=[];d=m(),c=m(),l=m(),e=[...c,...d,...l],n.innerHTML="",e.forEach((e=>{n.insertAdjacentElement("beforeend",_(e))}))})(),p()}))};s.addEventListener("click",(()=>p("prev"))),r.addEventListener("click",(()=>p("next"))),w()})();(()=>{const e=document.querySelector(".html-pets .pets");if(!e)return;const t=e.querySelector(".pets__list"),n=e.querySelector(".pets-pagination__page"),s=e.querySelector(".pets-pagination__button_first"),r=e.querySelector(".pets-pagination__button_prev"),i=e.querySelector(".pets-pagination__button_next"),c=e.querySelector(".pets-pagination__button_last");let d=[],l=[],u=1,m=[6,8,16],p=window.innerWidth;window.addEventListener("resize",(()=>{(p>=768&&window.innerWidth<768||p<768&&window.innerWidth>=768||p>=1280&&window.innerWidth<1280||p<1280&&window.innerWidth>=1280)&&(u=1,g()),p=window.innerWidth}));const _=()=>{const e=window.innerWidth;return e<768?m[2]:e<1280?m[1]:m[0]},w=(e="")=>{switch(e){case"first":u=1;break;case"prev":u=1===u?1:u-1;break;case"next":u=u===_()?u:u+1;break;case"last":u=_()}g()},g=()=>{const e=l.length/_(),o=((e,t)=>{const n=[];for(let s=0;s<e.length;s+=t){const r=e.slice(s,s+t);n.push(r)}return n})(l,e);n.textContent=u,t.innerHTML="",o[u-1].forEach((e=>{t.appendChild((e=>{const t=document.createElement("li");return t.classList.add("pets__item"),t.dataset.id=e,t.append(a(t,e)),t})(e))})),(()=>{switch(s.disabled=!1,r.disabled=!1,i.disabled=!1,c.disabled=!1,u){case 1:s.disabled=!0,r.disabled=!0;break;case _():i.disabled=!0,c.disabled=!0}})()};s.addEventListener("click",(()=>w("first"))),r.addEventListener("click",(()=>w("prev"))),i.addEventListener("click",(()=>w("next"))),c.addEventListener("click",(()=>w("last"))),o("./files/pets.json").then((e=>{d=[...e],(()=>{let e=[];for(let t=0;t<6;t++)e=d.reduce(((e,t)=>[...e,t.id]),[]).sort((()=>Math.random()-.5)),l=[...l,...e]})(),g()}))})();const c=document.querySelector(".modal");document.addEventListener("click",(e=>{c.classList.contains("hidden")||e.target.closest(".modal__wrapper")&&!e.target.closest(".modal__btn")||(c.classList.add("hidden"),r())})),document.addEventListener("click",(e=>{const t=e.target.closest(".card");if(!t||!c)return;e.preventDefault();((e,t)=>{o("./files/pets.json").then((n=>{for(const s of n)s.id==e&&(c.querySelector(".modal__title").textContent=s.name,c.querySelector(".modal__subtitle").textContent=`${s.type} - ${s.breed}`,c.querySelector(".modal__description").textContent=s.description,c.querySelector(".modal__parameters-item_age span").textContent=s.age,c.querySelector(".modal__parameters-item_inoculations span").textContent=s.inoculations.join(", "),c.querySelector(".modal__parameters-item_diseases span").textContent=s.diseases.join(", "),c.querySelector(".modal__parameters-item_parasites span").textContent=s.parasites.join(", "),c.querySelector(".modal__image img").src=t.src,c.querySelector(".modal__image img").alt=s.name,c.querySelectorAll(".modal__image source").forEach((e=>{e.srcset=t.srcset})),c.classList.remove("hidden"))}))})(t.closest("li[data-id]").dataset.id,{src:t.querySelector(".card__image-ibg img").dataset.src,srcset:t.querySelector(".card__image-ibg source")?t.querySelector(".card__image-ibg source").dataset.srcset:""}),i()}));document.querySelectorAll(".menu__link").forEach((e=>e.addEventListener("click",(e=>{e.target.closest(".html-menu")&&e.target.closest(".menu__link_menu")&&e.preventDefault(),t()}))));document.addEventListener("click",(({target:n=e.target})=>{document.documentElement.classList.contains("menu-open")&&!n.closest(".menu__list")&&t()})),function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||document.documentElement.classList.add("no-touch"),window.addEventListener("load",(()=>{const e=document.querySelectorAll("[data-src], [data-srcset], [data-poster]");e&&e.forEach((e=>{e.dataset.src&&(e.src=e.dataset.src),e.dataset.srcset&&(e.srcset=e.dataset.srcset),e.dataset.poster&&(e.poster=e.dataset.poster)}))})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){n&&e.target.closest(".icon-menu")&&(s(),document.documentElement.classList.toggle("menu-open"))}))})();